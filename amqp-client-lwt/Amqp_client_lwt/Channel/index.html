<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Channel (amqp-client-lwt.Amqp_client_lwt.Channel)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">amqp-client-lwt</a> &#x00BB; <a href="../index.html">Amqp_client_lwt</a> &#x00BB; Channel</nav><header class="odoc-preamble"><h1>Module <code><span>Amqp_client_lwt.Channel</span></code></h1></header><div class="odoc-content"><p>Operations on channels</p><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>_ t</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-confirms"><a href="#type-confirms" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a confirms</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-no_confirm"><a href="#type-no_confirm" class="anchor"></a><code><span><span class="keyword">type</span> no_confirm</span><span> = </span><span>[ </span></code><ol><li id="type-no_confirm.Ok" class="def variant constructor anchored"><a href="#type-no_confirm.Ok" class="anchor"></a><code><span>| </span><span>`Ok</span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-with_confirm"><a href="#type-with_confirm" class="anchor"></a><code><span><span class="keyword">type</span> with_confirm</span><span> = </span><span>[ </span></code><ol><li id="type-with_confirm.Ok" class="def variant constructor anchored"><a href="#type-with_confirm.Ok" class="anchor"></a><code><span>| </span><span>`Ok</span></code></li><li id="type-with_confirm.Failed" class="def variant constructor anchored"><a href="#type-with_confirm.Failed" class="anchor"></a><code><span>| </span><span>`Failed</span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_confirm"><a href="#val-no_confirm" class="anchor"></a><code><span><span class="keyword">val</span> no_confirm : <span><a href="#type-no_confirm">no_confirm</a> <a href="#type-confirms">confirms</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_confirm"><a href="#val-with_confirm" class="anchor"></a><code><span><span class="keyword">val</span> with_confirm : <span><a href="#type-with_confirm">with_confirm</a> <a href="#type-confirms">confirms</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span><span class="label">id</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-confirms">confirms</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Framing/index.html#type-t">Framing.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Framing/index.html#type-channel_no">Framing.channel_no</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <a href="../Thread/Deferred/index.html#type-t">Thread.Deferred.t</a></span></span></code></div><div class="spec-doc"><p>Create a new channel. Use Connection.open_channel rather than this method directly</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-close"><a href="#val-close" class="anchor"></a><code><span><span class="keyword">val</span> close : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../Thread/Deferred/index.html#type-t">Thread.Deferred.t</a></span></span></code></div><div class="spec-doc"><p>Close the channel</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-on_closed"><a href="#val-on_closed" class="anchor"></a><code><span><span class="keyword">val</span> on_closed : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../Thread/Deferred/index.html#type-t">Thread.Deferred.t</a></span></span></code></div><div class="spec-doc"><p><code>on_closed</code> becomes determined after then channel is closed.</p><p>If there are no consumers of this when the channel is close <code>Connection_closed</code> will be raised to the governing exception handler (the parent monitor in async, or <code>Lwt.async_exception_hook</code> in lwt).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-on_return"><a href="#val-on_return" class="anchor"></a><code><span><span class="keyword">val</span> on_return : 
  <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Spec/Basic/Return/index.html#type-t">Spec.Basic.Return.t</a> * <span>(<a href="../Spec/Basic/Content/index.html#type-t">Spec.Basic.Content.t</a> * string)</span>)</span> <a href="../Thread/Pipe/Reader/index.html#type-t">Thread.Pipe.Reader.t</a></span></span></code></div><div class="spec-doc"><p>Receive all returned messages. Reutnred message will be send to all readers returned from call to this function. Listening for returned messages are useful in e.g. rpc to know that message delivery failed and then stop waiting for a response.</p><p>Note that channels in ack mode there is no need to listen for returned messages, as message delivery will fail synchoniously.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-id"><a href="#val-id" class="anchor"></a><code><span><span class="keyword">val</span> id : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get the id of the channel</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-channel_no"><a href="#val-channel_no" class="anchor"></a><code><span><span class="keyword">val</span> channel_no : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the channel_no of the connection</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_prefetch"><a href="#val-set_prefetch" class="anchor"></a><code><span><span class="keyword">val</span> set_prefetch : <span><span class="optlabel">?count</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?size</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../Thread/Deferred/index.html#type-t">Thread.Deferred.t</a></span></span></code></div><div class="spec-doc"><p>Set prefetch counters for a channel.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">count</span> <p>Maximum messages inflight (un-acked)</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">size</span> <p>Maximum amount of bytes inflight</p><p>Note. if using rabbitmq, the prefetch limits are set per consumer on the channel, rather than per channel (across consumers)</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_global_prefetch"><a href="#val-set_global_prefetch" class="anchor"></a><code><span><span class="keyword">val</span> set_global_prefetch : 
  <span><span class="optlabel">?count</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?size</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../Thread/Deferred/index.html#type-t">Thread.Deferred.t</a></span></span></code></div><div class="spec-doc"><p>Set global prefetch counters.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">count</span> <p>Maximum messages inflight (un-acked)</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">size</span> <p>Maximum amount of bytes inflight</p><p>Note: if using rabbitmq, the prefetch limits are set per channel (across consumers), If not, the global prefetch settings is applied globally - across consumers and channels.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flush"><a href="#val-flush" class="anchor"></a><code><span><span class="keyword">val</span> flush : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../Thread/Deferred/index.html#type-t">Thread.Deferred.t</a></span></span></code></div><div class="spec-doc"><p>Flush the channel, making sure all messages have been sent</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Transaction"><a href="#module-Transaction" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Transaction/index.html">Transaction</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Transactions. Transactions can be made per channel.</p></div></div></div></body></html>
