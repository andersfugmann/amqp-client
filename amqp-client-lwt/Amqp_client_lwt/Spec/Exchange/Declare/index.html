<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Declare (amqp-client-lwt.Amqp_client_lwt.Spec.Exchange.Declare)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">amqp-client-lwt</a> &#x00BB; <a href="../../../index.html">Amqp_client_lwt</a> &#x00BB; <a href="../../index.html">Spec</a> &#x00BB; <a href="../index.html">Exchange</a> &#x00BB; Declare</nav><header class="odoc-preamble"><h1>Module <code><span>Exchange.Declare</span></code></h1><p>This method creates an exchange if it does not already exist, and if the exchange exists, verifies that it is of the correct and expected class.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.exchange" class="def record field anchored"><a href="#type-t.exchange" class="anchor"></a><code><span>exchange : <a href="../../index.html#type-exchange_name">exchange_name</a>;</span></code></li><li id="type-t.amqp_type" class="def record field anchored"><a href="#type-t.amqp_type" class="anchor"></a><code><span>amqp_type : <a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-shortstr">Amqp_client_lib.Types.shortstr</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Each exchange belongs to one of a set of exchange types implemented by the server. The exchange types define the functionality of the exchange - i.e. how messages are routed through it. It is not valid or meaningful to attempt to change the type of an existing exchange.</p><span class="comment-delim">*)</span></div></li><li id="type-t.passive" class="def record field anchored"><a href="#type-t.passive" class="anchor"></a><code><span>passive : <a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>If set, the server will reply with Declare-Ok if the exchange already exists with the same name, and raise an error if not. The client can use this to check whether an exchange exists without modifying the server state. When set, all other method fields except name and no-wait are ignored. A declare with both passive and no-wait has no effect. Arguments are compared for semantic equivalence.</p><span class="comment-delim">*)</span></div></li><li id="type-t.durable" class="def record field anchored"><a href="#type-t.durable" class="anchor"></a><code><span>durable : <a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>If set when creating a new exchange, the exchange will be marked as durable. Durable exchanges remain active when a server restarts. Non-durable exchanges (transient exchanges) are purged if/when a server restarts.</p><span class="comment-delim">*)</span></div></li><li id="type-t.auto_delete" class="def record field anchored"><a href="#type-t.auto_delete" class="anchor"></a><code><span>auto_delete : <a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>If set, the exchange is deleted when all queues have finished using it.</p><span class="comment-delim">*)</span></div></li><li id="type-t.internal" class="def record field anchored"><a href="#type-t.internal" class="anchor"></a><code><span>internal : <a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>If set, the exchange may not be used directly by publishers, but only when bound to other exchanges. Internal exchanges are used to construct wiring that is not visible to applications.</p><span class="comment-delim">*)</span></div></li><li id="type-t.no_wait" class="def record field anchored"><a href="#type-t.no_wait" class="anchor"></a><code><span>no_wait : <a href="../../index.html#type-no_wait">no_wait</a>;</span></code></li><li id="type-t.arguments" class="def record field anchored"><a href="#type-t.arguments" class="anchor"></a><code><span>arguments : <a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-table">Amqp_client_lib.Types.table</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>A set of arguments for the declaration. The syntax and semantics of these arguments depends on the server implementation.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : 
  <span><span class="label">exchange</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">amqp_type</span>:<a href="../../index.html#type-exchange_name">exchange_name</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">passive</span>:<a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-shortstr">Amqp_client_lib.Types.shortstr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">durable</span>:<a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">auto_delete</span>:<a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">internal</span>:<a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">no_wait</span>:<a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">arguments</span>:<a href="../../index.html#type-no_wait">no_wait</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../../amqp-client/Amqp_client_lib/Types/index.html#type-table">Amqp_client_lib.Types.table</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-request"><a href="#val-request" class="anchor"></a><code><span><span class="keyword">val</span> request : <span><span>(<a href="../../../Framing/index.html#type-t">Framing.t</a> * <a href="../../../Framing/index.html#type-channel_no">Framing.channel_no</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../../Thread/Deferred/index.html#type-t">Thread.Deferred.t</a></span></span></code></div></div></div></body></html>
